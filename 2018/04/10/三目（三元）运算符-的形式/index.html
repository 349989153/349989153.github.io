<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>三目（三元）运算符??::的形式 | 陆扬的个人博客</title><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><script src="/js/third-party/jquery.min.js">           </script><script src="/js/third-party/velocity.min.js">           </script><script src="/js/third-party/velocity.ui.min.js">           </script><link rel="icon" href="/img/favicon.ico"></head><body><nav id="nav-bar"><nav class="clear-fix" id="nav-container"><div class="pull-left" id="page-home"><a href="/">陆扬的个人博客</a></div><i class="fa fa-bars pull-right" id="toggle-nav" aria-hidden="true"></i><ul class="pull-right" id="navs"><li><a class="nav" href="/">Home</a></li><li><a class="nav" href="/about">About</a></li><li><a class="nav" href="/tags">Tags</a></li><li><a class="nav" href="/categories">Categories</a></li></ul></nav></nav><header id="header-info"><div id="header-container"><div id="site-info"><div id="terminal-pl"><div id="top-bar"><ul id="control"><li class="btn"></li><li class="btn"></li><li class="btn"></li></ul><div id="file-path"><i class="fa fa-folder folder-ic" aria-hidden="true"></i> 349989153 10 X 10</div></div><div id="code-pl">Last updated: 2018-04-10<br>349989153:~ Desktop$ <span class="code-pl-input">node 三目（三元）运算符??::的形式.js</span><br><br>> Post.tags <br><a class="tag" href="#js"><span>js</span></a><br><br>> Post.prev <br><a href="/2018/04/10/一道算法题（next smaller）/"><span class="answer">一道算法题（next smaller）</span></a><br><br>> Post.next <br><a href="/2018/04/10/Array-prototype-slice及其他Array方法/"><span class="answer">Array.prototype.slice及其他Array方法</span></a></div></div></div></div></header><div id="content-outer"><div id="content-inner"><article id="post"><a class="article-title">三目（三元）运算符??::的形式</a><time class="article-date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-04-10</time><p>一个三元运算符你能理解，多用几个呢？</p>
<a id="more"></a>
<hr>
<p>三目运算符相信大家都很熟悉了：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo ? <span class="string">'foo == true'</span> : <span class="string">'foo == false'</span></span><br></pre></td></tr></table></figure></p>
<p>而三目运算符<code>?:?:?.....</code>的调用方式大家也不陌生, 就相当于一堆if - else if语句：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foo ? <span class="string">'foo == true'</span> : bar ? <span class="string">'bar == true'</span> : <span class="string">'bar == false'</span></span><br></pre></td></tr></table></figure></p>
<p>但是在zepto.js里有一段代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">slice.call(</span><br><span class="line">  isSimple &amp;&amp; !maybeID &amp;&amp; element.getElementsByClassName ? <span class="comment">// DocumentFragment doesn't have getElementsByClassName/TagName</span></span><br><span class="line">  maybeClass ? element.getElementsByClassName(nameOnly) : <span class="comment">// If it's simple, it could be a class</span></span><br><span class="line">  element.getElementsByTagName(selector) : <span class="comment">// Or a tag</span></span><br><span class="line">  element.querySelectorAll(selector) <span class="comment">// Or it's not simple, and we need to query all</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>这里的三目运算符用的是<code>？？：：</code>的形式，我搞不太懂，所以打算做个实验搞懂它：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bool1 = <span class="literal">true</span>, bool2 = <span class="literal">true</span>, val1 = <span class="string">'val1'</span>, val2 = <span class="string">'val2'</span>, val3 = <span class="string">'val3'</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(bool1 ? bool2 ? val1 : val2 : val3);</span><br></pre></td></tr></table></figure>
<p>用表格记录下4个不同点情况：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bool1	bool2	值</span><br><span class="line"><span class="literal">true</span>	<span class="literal">true</span>	val1</span><br><span class="line"><span class="literal">true</span>	<span class="literal">false</span>	val2</span><br><span class="line"><span class="literal">false</span>	<span class="literal">true</span>	val3</span><br><span class="line"><span class="literal">false</span>	<span class="literal">false</span>	val3</span><br></pre></td></tr></table></figure></p>
<p>可以看出上面的代码等价于：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(bool1 ? ( bool2 ? val1 : val2 ) : val3);</span><br></pre></td></tr></table></figure></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" target="_blank" rel="noopener">条件（三元）运算符 -mdn</a>上说三目运算符具有右结合性，根据以上两个例子，我总结三目运算符右结合性的意思是：</p>
<h2 id="从最右边取”-”-然后看它左边相邻的符号，如果是”-”-那么它和这个”-”结合起来，可以用一个（）把它俩包住；如果左边相邻的符号是”-”，那么取左边的”-”，再重复这个判断"><a href="#从最右边取”-”-然后看它左边相邻的符号，如果是”-”-那么它和这个”-”结合起来，可以用一个（）把它俩包住；如果左边相邻的符号是”-”，那么取左边的”-”，再重复这个判断" class="headerlink" title="从最右边取”:”, 然后看它左边相邻的符号，如果是”?”,那么它和这个”?”结合起来，可以用一个（）把它俩包住；如果左边相邻的符号是”:”，那么取左边的”:”，再重复这个判断."></a>从最右边取”:”, 然后看它左边相邻的符号，如果是”?”,那么它和这个”?”结合起来，可以用一个（）把它俩包住；如果左边相邻的符号是”:”，那么取左边的”:”，再重复这个判断.</h2><p>比如：<br>    ?:?:?:?:?:<br>可以取为</p>
<pre><code>?:(?:(?:(?:(?:))))
</code></pre><p>而</p>
<pre><code>???:::
</code></pre><p>可以取为</p>
<pre><code>?(?(?:):):
</code></pre><p>然后根据你加上的括号，可以写出等价的if判断语句，这样就能理解复杂三目运算符所包含的意义了。</p>
<p>注意，三目运算符中”?”和”:”是成对出现的，最起码数量上，有几个”?”就会有几个”:”.</p>
</article><nav id="pagination"><div class="pagination clear-fix"><div class="page-prev pull-left"><a href="/2018/04/10/一道算法题（next smaller）/"><i class="fa fa-chevron-left"> </i><span>一道算法题（next smaller）</span></a></div><div class="page-next pull-right"><a href="/2018/04/10/Array-prototype-slice及其他Array方法/"><span>Array.prototype.slice及其他Array方法</span><i class="fa fa-chevron-right"></i></a></div></div></nav></div></div><footer><div id="footer-inner"><div class="social-icons"></div><p class="design-info">power by <a href="https://hexo.io" target="_blank">Hexo</a> | theme <a href="https://github.com/lazysheep666/terminal_theme" target="_blank">Teminal</a></p><p class="copyright">Copyright © 349989153 Blog 2018</p></div></footer><script src="/js/nav.js"></script><script src="/js/scroll.js"></script><script src="/js/index.js"></script></body></html>